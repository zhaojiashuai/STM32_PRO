# freertos学习心得

## 一、任务堆栈

1、函数调用深度

2、局部变量和临时变量的存储 

3、堆栈溢出检测

4、在确定任务堆栈的大小时，需要综合考虑任务的函数调用深度、变量的数量和大小，以及堆栈溢出检测的需求。过小的堆栈大小可能导致堆栈溢出问题，而过大的堆栈大小会占用过多的内存资源。

## 二、任务句柄

1、是一个用于标识任务的数据类型，通常是一个指向任务控制块（Task Control Block，TCB）的指针

2、通过任务句柄，可以执行以下操作：任务创建、任务删除、任务状态查询、任务控制

3、任务句柄允许开发者对任务进行唯一标识和操作，提供了对任务的灵活管理和控制能力。通过任务句柄，可以更方便地与任务进行交互，并实现多任务的调度和协作。

# 三、临界区

1、临界区可以通过使用任务调度器的临界区禁止中断来实现。它提供了一种简单和轻量级的方式来保护关键代码段，以防止多任务环境下的竞争条件。

2、执行vTaskEnterCritical()函数会禁用任务调度器中断，并且只允许当前任务运行。这样，其他任务无法抢占CPU，从而保护了临界区中的关键代码不被中断打断。

3、执行vTaskExitCritical()函数会重新启用中断，并让任务调度器重新选择下一个可运行的任务进行调度。

4、临界区只是禁止了任务调度器中断，它并不能解决其他形式的竞争条件或资源冲突。如果存在共享资源的访问问题，还需要使用其他的同步机制（如互斥量、信号量等）来保证数据的一致性和正确性。

5、在临界区中的代码应保持尽可能简洁，以避免阻塞其他任务的执行。对于那些需要较长时间才能执行完成的操作，建议使用其他同步机制来代替临界区。
